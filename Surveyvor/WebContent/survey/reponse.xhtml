<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<ui:composition template="../layouts/layout.xhtml">
	<ui:define name="titre">Details du sondage	</ui:define>
	<ui:define name="content">
		<section class="content-header">
			<h4>
				RÃ©pondre au sondage <small>Surveyvor</small>
			</h4>
		</section>

		<script type="text/javascript">
			function handleDrop(event, ui) {
				var droppedCar = ui.draggable;
				droppedCar.fadeOut('fast');
			}
		</script>

		<h:form>
			<section class="content">
				<div class="box box-default" style="text-align: center;">
					<div class="box-header with-border">
						<h3>
							<h:outputText value="#{surveyBean.selected.title}" />
						</h3>
						<p:outputLabel value="#{surveyBean.selected.endDate}"
							styleClass="pull-right" />
					</div>
					<div class="box-body">
						<p:outputLabel value="#{surveyBean.selected.description}" />
					</div>
					<div class="box box-warning">
						<div class="box-body" style="text-align: left;">
							<c:forEach var="question" items="#{surveyBean.selected.questions}">
								<c:if test="#{surveyBean.selected.type eq 'REPARTITION'}">
									<p:fieldset id="repartitionQuestionsField" legend="#{question.contenu}">
										<p:dataGrid id="availableChoices" var="choice" value="#{question.choices}" columns="1">
											<p:panel id="pnl" header="#{choice.label}" style="text-align:center" />
											<p:draggable for="pnl" revert="true" handle=".ui-panel-titlebar" stack=".ui-panel" />
										</p:dataGrid>
									</p:fieldset>
									<p:droppable for="selectedChoices" tolerance="touch"
										activeStyleClass="ui-state-highlight"
										datasource="availableChoices" onDrop="handleDrop">
										<p:ajax listener="#{surveyBean.onChoiceDrop}" update="dropArea availableChoices" />
									</p:droppable>
									<p:fieldset id="selectedChoices" legend="Vos choix">
										<p:outputPanel id="dropArea">
											<h:outputText value="Deposez vos choix ici"
												rendered="#{empty surveyBean.droppedChoices}"
												style="font-size:24px;" />
											<p:dataGrid id="selectedChoicesGrid" var="c"
												value="#{surveyBean.droppedChoices}"
												rendered="#{not empty surveyBean.droppedChoices}"
												columns="1">
												<p:panel id="dropPnl" header="#{c.label}" style="text-align:center" />
											</p:dataGrid>
										</p:outputPanel>
									</p:fieldset>

								</c:if>
								<c:if test="#{surveyBean.selected.type eq 'OPINION'}">
									<p:fieldset id="opinionQuestionsField"
										legend="#{question.contenu}">
										<p:inputText id="answer" value="" />
									</p:fieldset>
								</c:if>
							</c:forEach>

						</div>
						<div class="box-footer">
							<p:commandButton styleClass="btn btn-warning btn-flat pull-right"
								value="Enregistrer" />
						</div>
					</div>
					<div class="box box-warning direct-chat direct-chat-warning">
						<div class="box-header with-border">
							<h4>Les commentaires</h4>
						</div>
						<div class="box-body">
							<div class="direct-chat-contacts">
								<ul class="contacts-list">
									<c:forEach begin="1" end="8" step="1" var="msg">
										<li><p:graphicImage styleClass="contacts-list-img"
												library="img" name="user1-128x128.jpg" />
											<div class="contacts-list-info">
												<span class="contacts-list-name"> User #{msg} <small
													class="contacts-list-date pull-right">2/28/2015</small>
												</span> <span class="contacts-list-msg">Im User #{msg}</span>
											</div></li>
									</c:forEach>
								</ul>
							</div>
						</div>
						<div class="box-footer">
							<div class="input-group">
								<p:inputText styleClass="inputs"
									placeholder="Ajoutez un commentaire..." />
								<div class="input-group-btn">
									<p:commandButton icon="ui-icon-plus"
										styleClass="btn btn-warning btn-flat pull-right" />
								</div>
							</div>
						</div>
					</div>

				</div>
			</section>
		</h:form>
	</ui:define>
</ui:composition>
</html>