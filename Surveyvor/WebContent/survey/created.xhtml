<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core"	
    >
<ui:composition template="../layouts/layout.xhtml">
	<ui:define name="titre">Mes sondages</ui:define>
	<ui:define name="content">
		<section class="content-header">
          <h4>
            Mes sondages crées 
            <small>Surveyvor</small>
          </h4>
     	</section>
		<h:form>
			<section class="content">
				<div class="box box-default" style="text-align: center;">
					<div class="box-header with-border" >
						<p:dataTable rows="10"  paginatorAlwaysVisible="false" paginator="true"
						emptyMessage="Il y a aucun sondage crée" value="#{surveyBean.list}" var="survey">
							<f:facet name="header">
								Liste de mes sondages
							</f:facet>
							<p:column headerText="Titre" width="40%">
								<h:outputText value="#{survey.title}" />
							</p:column>
							<p:column headerText="Date limite" width="20%">
								<h:outputText value="#{survey.endDate}" >
									<f:convertDateTime pattern="dd/MM/yyy"/>
								</h:outputText>
							</p:column>
							<p:column headerText="Nombre de votes" width="15%">
								<c:if test="#{empty survey.answerers}">
									<h:outputText value="0" />
								</c:if>
								<c:if test="#{!empty survey.answerers}">
									<h:outputText value="#{survey.answerers.size()}" />
								</c:if>
							</p:column>
							<p:column headerText="Actions" width="25%">
								<p:commandButton action="#{surveyBean.showSurvey}" title="Voir les details du sondage" styleClass="icon blue" icon="ui-icon-clipboard">
									<f:setPropertyActionListener value="#{survey}" target="#{surveyBean.selected}"/>
								</p:commandButton>
								<p:commandButton title="Modifier la date limite du sondage" styleClass="icon orange" icon="ui-icon-gear">
									<f:setPropertyActionListener value="#{survey}" target="#{surveyBean.selected}"/>
								</p:commandButton>
								<p:commandButton title="Supprimer le sondage" styleClass="icon red" icon="ui-icon-closethick">
									<f:setPropertyActionListener value="#{survey}" target="#{surveyBean.selected}"/>
								</p:commandButton>
							</p:column>
						</p:dataTable>
					</div>
				</div>
			</section>
    	 </h:form>
	</ui:define>
</ui:composition>
</html>